<!DOCTYPE html>
<html lang="en" dir="ltr"><head><title>grivredr</title><meta charset="utf-8"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;family=IBM Plex Mono:wght@400;600&amp;display=swap"/><link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin="anonymous"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="og:site_name" content="Darshi"/><meta property="og:title" content="grivredr"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="grivredr"/><meta name="twitter:description" content="Grivredr - AI-Powered Web Scraper Factory Automated Government Portal Integration for Grievance Filing Part of: Darshi Civic Suite This document outlines the integration and architecture of Grivredr, an intelligent system that automatically generates web scrapers for government grievance portals."/><meta property="og:description" content="Grivredr - AI-Powered Web Scraper Factory Automated Government Portal Integration for Grievance Filing Part of: Darshi Civic Suite This document outlines the integration and architecture of Grivredr, an intelligent system that automatically generates web scrapers for government grievance portals."/><meta property="og:image:alt" content="Grivredr - AI-Powered Web Scraper Factory Automated Government Portal Integration for Grievance Filing Part of: Darshi Civic Suite This document outlines the integration and architecture of Grivredr, an intelligent system that automatically generates web scrapers for government grievance portals."/><meta property="twitter:domain" content="darshi.app/docs"/><meta property="og:url" content="https://darshi.app/docs/misc/future/grivredr"/><meta property="twitter:url" content="https://darshi.app/docs/misc/future/grivredr"/><link rel="icon" href="../../static/icon.png"/><meta name="description" content="Grivredr - AI-Powered Web Scraper Factory Automated Government Portal Integration for Grievance Filing Part of: Darshi Civic Suite This document outlines the integration and architecture of Grivredr, an intelligent system that automatically generates web scrapers for government grievance portals."/><meta name="generator" content="Quartz"/><link href="../../index.css" rel="stylesheet" type="text/css" data-persist="true"/><style>.expand-button {
  position: absolute;
  display: flex;
  float: right;
  padding: 0.4rem;
  margin: 0.3rem;
  right: 0;
  color: var(--gray);
  border-color: var(--dark);
  background-color: var(--light);
  border: 1px solid;
  border-radius: 5px;
  opacity: 0;
  transition: 0.2s;
}
.expand-button > svg {
  fill: var(--light);
  filter: contrast(0.3);
}
.expand-button:hover {
  cursor: pointer;
  border-color: var(--secondary);
}
.expand-button:focus {
  outline: 0;
}

pre:hover > .expand-button {
  opacity: 1;
  transition: 0.2s;
}

#mermaid-container {
  position: fixed;
  contain: layout;
  z-index: 999;
  left: 0;
  top: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  display: none;
  backdrop-filter: blur(4px);
  background: rgba(0, 0, 0, 0.5);
}
#mermaid-container.active {
  display: inline-block;
}
#mermaid-container > #mermaid-space {
  border: 1px solid var(--lightgray);
  background-color: var(--light);
  border-radius: 5px;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  height: 80vh;
  width: 80vw;
  overflow: hidden;
}
#mermaid-container > #mermaid-space > .mermaid-content {
  position: relative;
  transform-origin: 0 0;
  transition: transform 0.1s ease;
  overflow: visible;
  min-height: 200px;
  min-width: 200px;
}
#mermaid-container > #mermaid-space > .mermaid-content pre {
  margin: 0;
  border: none;
}
#mermaid-container > #mermaid-space > .mermaid-content svg {
  max-width: none;
  height: auto;
}
#mermaid-container > #mermaid-space > .mermaid-controls {
  position: absolute;
  bottom: 20px;
  right: 20px;
  display: flex;
  gap: 8px;
  padding: 8px;
  background: var(--light);
  border: 1px solid var(--lightgray);
  border-radius: 6px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  z-index: 2;
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  padding: 0;
  border: 1px solid var(--lightgray);
  background: var(--light);
  color: var(--dark);
  border-radius: 4px;
  cursor: pointer;
  font-size: 16px;
  font-family: var(--bodyFont);
  transition: all 0.2s ease;
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:hover {
  background: var(--lightgray);
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:active {
  transform: translateY(1px);
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:nth-child(2) {
  width: auto;
  padding: 0 12px;
  font-size: 14px;
}
/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL2hvbWUvc2lkaGFudC9EZXNrdG9wL2RhcnNoaS9kb2NzLXF1YXJ0ei9xdWFydHovY29tcG9uZW50cy9zdHlsZXMiLCJzb3VyY2VzIjpbIm1lcm1haWQuaW5saW5lLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBOztBQUdGO0VBQ0U7OztBQUtGO0VBQ0U7RUFDQTs7O0FBSUo7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBOztBQUlKO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTs7QUFHRjtFQUNFOztBQUlGO0VBQ0U7RUFDQTtFQUNBIiwic291cmNlc0NvbnRlbnQiOlsiLmV4cGFuZC1idXR0b24ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsb2F0OiByaWdodDtcbiAgcGFkZGluZzogMC40cmVtO1xuICBtYXJnaW46IDAuM3JlbTtcbiAgcmlnaHQ6IDA7IC8vIE5PVEU6IHJpZ2h0IHdpbGwgYmUgc2V0IGluIG1lcm1haWQuaW5saW5lLnRzXG4gIGNvbG9yOiB2YXIoLS1ncmF5KTtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1kYXJrKTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbGlnaHQpO1xuICBib3JkZXI6IDFweCBzb2xpZDtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuICBvcGFjaXR5OiAwO1xuICB0cmFuc2l0aW9uOiAwLjJzO1xuXG4gICYgPiBzdmcge1xuICAgIGZpbGw6IHZhcigtLWxpZ2h0KTtcbiAgICBmaWx0ZXI6IGNvbnRyYXN0KDAuMyk7XG4gIH1cblxuICAmOmhvdmVyIHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnkpO1xuICB9XG5cbiAgJjpmb2N1cyB7XG4gICAgb3V0bGluZTogMDtcbiAgfVxufVxuXG5wcmUge1xuICAmOmhvdmVyID4gLmV4cGFuZC1idXR0b24ge1xuICAgIG9wYWNpdHk6IDE7XG4gICAgdHJhbnNpdGlvbjogMC4ycztcbiAgfVxufVxuXG4jbWVybWFpZC1jb250YWluZXIge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIGNvbnRhaW46IGxheW91dDtcbiAgei1pbmRleDogOTk5O1xuICBsZWZ0OiAwO1xuICB0b3A6IDA7XG4gIHdpZHRoOiAxMDB2dztcbiAgaGVpZ2h0OiAxMDB2aDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgZGlzcGxheTogbm9uZTtcbiAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDRweCk7XG4gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC41KTtcblxuICAmLmFjdGl2ZSB7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICB9XG5cbiAgJiA+ICNtZXJtYWlkLXNwYWNlIHtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1saWdodGdyYXkpO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWxpZ2h0KTtcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgIHRvcDogNTAlO1xuICAgIGxlZnQ6IDUwJTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICBoZWlnaHQ6IDgwdmg7XG4gICAgd2lkdGg6IDgwdnc7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcblxuICAgICYgPiAubWVybWFpZC1jb250ZW50IHtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIHRyYW5zZm9ybS1vcmlnaW46IDAgMDtcbiAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjFzIGVhc2U7XG4gICAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgICAgIG1pbi1oZWlnaHQ6IDIwMHB4O1xuICAgICAgbWluLXdpZHRoOiAyMDBweDtcblxuICAgICAgcHJlIHtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICB9XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIG1heC13aWR0aDogbm9uZTtcbiAgICAgICAgaGVpZ2h0OiBhdXRvO1xuICAgICAgfVxuICAgIH1cblxuICAgICYgPiAubWVybWFpZC1jb250cm9scyB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBib3R0b206IDIwcHg7XG4gICAgICByaWdodDogMjBweDtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBnYXA6IDhweDtcbiAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWxpZ2h0KTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWxpZ2h0Z3JheSk7XG4gICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgei1pbmRleDogMjtcblxuICAgICAgLm1lcm1haWQtY29udHJvbC1idXR0b24ge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgd2lkdGg6IDMycHg7XG4gICAgICAgIGhlaWdodDogMzJweDtcbiAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tbGlnaHRncmF5KTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tbGlnaHQpO1xuICAgICAgICBjb2xvcjogdmFyKC0tZGFyayk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1ib2R5Rm9udCk7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG5cbiAgICAgICAgJjpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tbGlnaHRncmF5KTtcbiAgICAgICAgfVxuXG4gICAgICAgICY6YWN0aXZlIHtcbiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMXB4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFN0eWxlIHRoZSByZXNldCBidXR0b24gZGlmZmVyZW50bHlcbiAgICAgICAgJjpudGgtY2hpbGQoMikge1xuICAgICAgICAgIHdpZHRoOiBhdXRvO1xuICAgICAgICAgIHBhZGRpbmc6IDAgMTJweDtcbiAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ== */</style><link href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" rel="stylesheet" type="text/css" data-persist="true"/><script src="../../prescript.js" type="application/javascript" data-persist="true"></script><script type="application/javascript" data-persist="true">const fetchData = fetch("../../static/contentIndex.json").then(data => data.json())</script><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://darshi.app/docs/index.xml"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:image" content="https://darshi.app/docs/misc/future/grivredr-og-image.webp"/><meta property="og:image:url" content="https://darshi.app/docs/misc/future/grivredr-og-image.webp"/><meta name="twitter:image" content="https://darshi.app/docs/misc/future/grivredr-og-image.webp"/><meta property="og:image:type" content="image/.webp"/></head><body data-slug="misc/future/grivredr"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h2 class="page-title"><a href="../..">Darshi</a></h2><div class="spacer mobile-only"></div><div class="flex-component" style="flex-direction: row; flex-wrap: nowrap; gap: 1rem;"><div style="flex-grow: 1; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><div class="search"><button class="search-button"><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title>Search</title><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg><p>Search</p></button><div class="search-container"><div class="search-space"><input autocomplete="off" class="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div class="search-layout" data-preview="true"></div></div></div></div></div><div style="flex-grow: 0; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><button class="darkmode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve" aria-label="Dark mode"><title>Dark mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve" aria-label="Light mode"><title>Light mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></button></div><div style="flex-grow: 0; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><button class="readermode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="readerIcon" fill="currentColor" stroke="currentColor" stroke-width="0.2" stroke-linecap="round" stroke-linejoin="round" width="64px" height="64px" viewBox="0 0 24 24" aria-label="Reader mode"><title>Reader mode</title><g transform="translate(-1.8, -1.8) scale(1.15, 1.2)"><path d="M8.9891247,2.5 C10.1384702,2.5 11.2209868,2.96705384 12.0049645,3.76669482 C12.7883914,2.96705384 13.8709081,2.5 15.0202536,2.5 L18.7549359,2.5 C19.1691495,2.5 19.5049359,2.83578644 19.5049359,3.25 L19.5046891,4.004 L21.2546891,4.00457396 C21.6343849,4.00457396 21.9481801,4.28672784 21.9978425,4.6528034 L22.0046891,4.75457396 L22.0046891,20.25 C22.0046891,20.6296958 21.7225353,20.943491 21.3564597,20.9931534 L21.2546891,21 L2.75468914,21 C2.37499337,21 2.06119817,20.7178461 2.01153575,20.3517706 L2.00468914,20.25 L2.00468914,4.75457396 C2.00468914,4.37487819 2.28684302,4.061083 2.65291858,4.01142057 L2.75468914,4.00457396 L4.50368914,4.004 L4.50444233,3.25 C4.50444233,2.87030423 4.78659621,2.55650904 5.15267177,2.50684662 L5.25444233,2.5 L8.9891247,2.5 Z M4.50368914,5.504 L3.50468914,5.504 L3.50468914,19.5 L10.9478955,19.4998273 C10.4513189,18.9207296 9.73864328,18.5588115 8.96709342,18.5065584 L8.77307039,18.5 L5.25444233,18.5 C4.87474657,18.5 4.56095137,18.2178461 4.51128895,17.8517706 L4.50444233,17.75 L4.50368914,5.504 Z M19.5049359,17.75 C19.5049359,18.1642136 19.1691495,18.5 18.7549359,18.5 L15.2363079,18.5 C14.3910149,18.5 13.5994408,18.8724714 13.0614828,19.4998273 L20.5046891,19.5 L20.5046891,5.504 L19.5046891,5.504 L19.5049359,17.75 Z M18.0059359,3.999 L15.0202536,4 L14.8259077,4.00692283 C13.9889509,4.06666544 13.2254227,4.50975805 12.7549359,5.212 L12.7549359,17.777 L12.7782651,17.7601316 C13.4923805,17.2719483 14.3447024,17 15.2363079,17 L18.0059359,16.999 L18.0056891,4.798 L18.0033792,4.75457396 L18.0056891,4.71 L18.0059359,3.999 Z M8.9891247,4 L6.00368914,3.999 L6.00599909,4.75457396 L6.00599909,4.75457396 L6.00368914,4.783 L6.00368914,16.999 L8.77307039,17 C9.57551536,17 10.3461406,17.2202781 11.0128313,17.6202194 L11.2536891,17.776 L11.2536891,5.211 C10.8200889,4.56369974 10.1361548,4.13636104 9.37521067,4.02745763 L9.18347055,4.00692283 L8.9891247,4 Z"></path></g></svg></button></div></div><div class="explorer" data-behavior="link" data-collapsed="collapsed" data-savestate="true" data-data-fns="{&quot;order&quot;:[&quot;filter&quot;,&quot;map&quot;,&quot;sort&quot;],&quot;sortFn&quot;:&quot;(a,b)=>!a.isFolder&amp;&amp;!b.isFolder||a.isFolder&amp;&amp;b.isFolder?a.displayName.localeCompare(b.displayName,void 0,{numeric:!0,sensitivity:\&quot;base\&quot;}):!a.isFolder&amp;&amp;b.isFolder?1:-1&quot;,&quot;filterFn&quot;:&quot;node=>node.slugSegment!==\&quot;tags\&quot;&quot;,&quot;mapFn&quot;:&quot;node=>node&quot;}"><button type="button" class="explorer-toggle mobile-explorer hide-until-loaded" data-mobile="true" aria-controls="explorer-19"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide-menu"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button><button type="button" class="title-button explorer-toggle desktop-explorer" data-mobile="false" aria-expanded="true"><h2>Explorer</h2><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-19" class="explorer-content" aria-expanded="false" role="group"><ul class="explorer-ul overflow" id="list-0"><li class="overflow-end"></li></ul></div><template id="template-file"><li><a href="#"></a></li></template><template id="template-folder"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div><button class="folder-button"><span class="folder-title"></span></button></div></div><div class="folder-outer"><ul class="content"></ul></div></li></template></div></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container" aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="../../">Home</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../misc/">misc</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../misc/future/">future</a><p> ❯ </p></div><div class="breadcrumb-element"><a href>grivredr</a></div></nav><h1 class="article-title">grivredr</h1><p show-comma="true" class="content-meta"><time datetime="2025-12-27T20:33:10.172Z">Dec 28, 2025</time><span>19 min read</span></p></div></div><article class="popover-hint"><h1 id="grivredr---ai-powered-web-scraper-factory">Grivredr - AI-Powered Web Scraper Factory<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#grivredr---ai-powered-web-scraper-factory" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<blockquote>
<p>Automated Government Portal Integration for Grievance Filing</p>
</blockquote>
<p><strong>Part of: Darshi Civic Suite</strong></p>
<p>This document outlines the integration and architecture of Grivredr, an intelligent system that automatically generates web scrapers for government grievance portals.</p>
<hr/>
<h2 id="table-of-contents">Table of Contents<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#table-of-contents" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ol>
<li><a href="#executive-summary" class="internal alias">Executive Summary</a></li>
<li><a href="#problem-statement" class="internal alias">Problem Statement</a></li>
<li><a href="#solution-overview" class="internal alias">Solution Overview</a></li>
<li><a href="#architecture-overview" class="internal alias">Architecture Overview</a></li>
<li><a href="#key-components" class="internal alias">Key Components</a></li>
<li><a href="#the-discovery-process" class="internal alias">The Discovery Process</a></li>
<li><a href="#the-validation--self-healing-loop" class="internal alias">The Validation &amp; Self-Healing Loop</a></li>
<li><a href="#pattern-learning-system" class="internal alias">Pattern Learning System</a></li>
<li><a href="#directory-structure" class="internal alias">Directory Structure</a></li>
<li><a href="#cli-commands" class="internal alias">CLI Commands</a></li>
<li><a href="#cost-tracking" class="internal alias">Cost Tracking</a></li>
<li><a href="#integration-with-darshi" class="internal alias">Integration with Darshi</a></li>
<li><a href="#migration-path" class="internal alias">Migration Path</a></li>
<li><a href="#challenges--mitigations" class="internal alias">Challenges &amp; Mitigations</a></li>
</ol>
<hr/>
<h2 id="executive-summary">Executive Summary<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#executive-summary" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p><strong>Problem:</strong> Indian government portals for grievance registration are diverse, complex, and frequently changing. Writing and maintaining scrapers manually is time-consuming and brittle.</p>
<p><strong>Solution:</strong> Grivredr uses AI (Claude with computer use) to automatically:</p>
<ol>
<li><strong>Discover</strong> form structures</li>
<li><strong>Generate</strong> working scraper code</li>
<li><strong>Validate</strong> that scrapers work correctly</li>
<li><strong>Self-heal</strong> when portals change</li>
<li><strong>Learn</strong> from successful patterns</li>
</ol>
<p><strong>Value Proposition:</strong> Reduce portal integration time from 10-20 hours to ~5 minutes, with self-healing capabilities that adapt to portal changes and continuous learning that improves over time.</p>
<hr/>
<h2 id="problem-statement">Problem Statement<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#problem-statement" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="the-challenge">The Challenge<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#the-challenge" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>Indian government portals for grievance registration have several challenges:</p>
<h4 id="1-diverse-technologies">1. Diverse Technologies<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#1-diverse-technologies" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<pre><code>Portal Technologies:
├─ React-based (Ant-Design components)
├─ jQuery-based (Select2 dropdowns)
├─ ASP.NET WebForms
├─ Plain HTML forms
├─ Angular/Vue applications
└─ Custom JavaScript frameworks
</code></pre>
<h4 id="2-complex-dropdowns">2. Complex Dropdowns<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#2-complex-dropdowns" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<pre><code>Cascading Dependencies:
State → District → Block → Village
Zone → Ward → Locality
Category → Subcategory → Issue Type
</code></pre>
<h4 id="3-dynamic-content">3. Dynamic Content<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#3-dynamic-content" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<ul>
<li>Fields appear/disappear based on selections</li>
<li>Options loaded via AJAX</li>
<li>Multi-step forms</li>
<li>File uploads with specific requirements</li>
</ul>
<h4 id="4-no-apis">4. No APIs<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#4-no-apis" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<ul>
<li>Most portals only have web forms</li>
<li>No programmatic access</li>
<li>Must interact through browser</li>
</ul>
<h4 id="5-frequent-changes">5. Frequent Changes<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#5-frequent-changes" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<ul>
<li>Portal UI updated without notice</li>
<li>Existing scrapers break</li>
<li>Constant maintenance required</li>
</ul>
<h3 id="traditional-approach-painful">Traditional Approach (Painful)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#traditional-approach-painful" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>For each portal:
1. Manually inspect form (2-4 hours)
   - Identify all fields
   - Note all dropdown options
   - Understand cascading logic
   - Document required fields

2. Write Playwright/Selenium code (4-8 hours)
   - Handle each field type
   - Implement cascade logic
   - Add error handling
   - Handle file uploads

3. Handle edge cases (2-4 hours)
   - Timeout issues
   - Dynamic content loading
   - Validation errors
   - Popup dialogs

4. Test and debug (2-4 hours)
   - Test with various inputs
   - Fix discovered issues
   - Verify submission success

5. Maintain when portal changes (ongoing)
   - Monitor for breakage
   - Update selectors
   - Retest everything

Total: 10-20 hours per portal
</code></pre>
<h3 id="grivredr-approach-automated">Grivredr Approach (Automated)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#grivredr-approach-automated" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>For each portal:
1. Run: grivredr discover --url &lt;url> --portal &lt;name>
2. AI discovers form structure (~2 minutes)
3. AI generates scraper code (~30 seconds)
4. Validate and auto-fix if needed (~2 minutes)

Total: ~5 minutes per portal, ~$0.30-0.70 in AI costs

Bonus: Each successful scraper teaches the system,
       making future portals faster and more accurate.
</code></pre>
<hr/>
<h2 id="solution-overview">Solution Overview<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#solution-overview" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="automated-scraper-generation-pipeline">Automated Scraper Generation Pipeline<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#automated-scraper-generation-pipeline" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>┌─────────────────────────────────────────────────────────────────┐
│                        GRIVREDR PIPELINE                         │
└─────────────────────────────────────────────────────────────────┘

     ┌──────────┐      ┌──────────┐      ┌──────────┐      ┌──────────┐
     │          │      │          │      │          │      │          │
     │ DISCOVER │ ──── │ GENERATE │ ──── │ VALIDATE │ ──── │  IMPROVE │
     │          │      │          │      │          │      │          │
     └──────────┘      └──────────┘      └──────────┘      └──────────┘
          │                 │                 │                 │
          ▼                 ▼                 ▼                 ▼
    ┌──────────┐      ┌──────────┐      ┌──────────┐      ┌──────────┐
    │  Form    │      │ Scraper  │      │  Test    │      │ Working  │
    │ Structure│      │   Code   │      │ Results  │      │ Scraper  │
    └──────────┘      └──────────┘      └──────────┘      └──────────┘
                                                                 │
                                                                 ▼
                                                           ┌──────────┐
                                                           │  LEARN   │
                                                           │ Pattern  │
                                                           └──────────┘
</code></pre>
<h3 id="step-by-step">Step-by-Step<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#step-by-step" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<ol>
<li>
<p><strong>Discovery Phase</strong></p>
<ul>
<li>Open portal URL in headless browser</li>
<li>AI analyzes form structure (uses Playwright tools)</li>
<li>Extract all fields, dropdowns, options</li>
<li>Identify cascading relationships</li>
<li>Detect UI framework</li>
</ul>
</li>
<li>
<p><strong>Generation Phase</strong></p>
<ul>
<li>Use discovered structure to generate Python code</li>
<li>Apply framework-specific patterns from library</li>
<li>Include all dropdown option values</li>
<li>Handle cascading dependencies</li>
</ul>
</li>
<li>
<p><strong>Validation Phase</strong></p>
<ul>
<li>Run generated scraper with test data</li>
<li>Take screenshots to verify correctness</li>
<li>Use AI vision to check for errors</li>
</ul>
</li>
<li>
<p><strong>Self-Healing Phase</strong> (if needed)</p>
<ul>
<li>Capture runtime errors</li>
<li>AI analyzes error + screenshot</li>
<li>Generate targeted fix</li>
<li>Apply fix and retry</li>
</ul>
</li>
<li>
<p><strong>Learning Phase</strong></p>
<ul>
<li>Store successful patterns in library</li>
<li>Update framework-specific templates</li>
<li>Improve future code generation</li>
</ul>
</li>
</ol>
<hr/>
<h2 id="architecture-overview">Architecture Overview<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#architecture-overview" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="system-components">System Components<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#system-components" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>grivredr/
│
├── agents/                      # AI Agents (the brains)
│   ├── hybrid_form_discovery.py # Main discovery agent
│   ├── scraper_validator.py     # Validation + self-healing
│   ├── continuous_improvement_agent.py  # Iterative improvement
│   ├── code_generator_agent.py  # Code generation
│   └── base_agent.py            # Base class with cost tracking
│
├── cli/                         # Command-line interfaces
│   ├── factory_cli.py           # Main CLI (discover, validate, etc.)
│   └── fill_cli.py              # Form filling CLI
│
├── knowledge/                   # Pattern library &amp; templates
│   ├── pattern_library.py       # Store successful patterns
│   ├── code_templates.py        # Reusable code snippets
│   └── framework_detector.py    # Detect UI frameworks
│
├── utils/                       # Utilities
│   ├── portal_manager.py        # Manage portal data
│   ├── code_extraction.py       # Extract code from AI responses
│   ├── constants.py             # Configuration constants
│   └── tracking.py              # Extract tracking IDs
│
├── scrapers/                    # Generated scrapers (output)
│   ├── mcd_delhi/
│   └── ranchi_smart/
│
├── portals/                     # Unified portal data structure
│   └── {state}/{district}/{portal}/
│       ├── scraper.py           # Generated scraper
│       ├── structure.json       # Form structure
│       ├── context/             # Dropdown context
│       │   ├── dropdowns.json   # All dropdown options
│       │   ├── cascades.json    # Cascade relationships
│       │   └── field_mappings.json
│       └── metadata.json        # Training metadata
│
└── config/                      # Configuration
    └── ai_client.py             # AI client setup
</code></pre>
<hr/>
<h2 id="key-components">Key Components<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#key-components" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="1-hybrid-form-discovery-agent">1. Hybrid Form Discovery Agent<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#1-hybrid-form-discovery-agent" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>The main discovery engine that combines AI intelligence with browser automation.</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="python" data-theme="github-light github-dark"><code data-language="python" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HybridFormDiscovery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    AI orchestrates, Playwright executes.</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    The AI calls tools like:</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    - get_all_form_fields()      # Get field overview</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    - get_dropdown_options()     # Extract dropdown values</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    - select_dropdown_option()   # Test cascading</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    - complete_discovery()       # Finish with full structure</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> discover_form</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, url: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -> </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Main discovery method.</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Returns complete form structure with all dropdown options.</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 1. Navigate to URL</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.page.goto(url)</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.page.wait_for_load_state(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">'networkidle'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 2. Let AI discover structure</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        discovery_result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._run_ai_discovery()</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 3. Parse and validate result</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        form_structure </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._parse_discovery_result(discovery_result)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> form_structure</span></span></code></pre></figure>
<p><strong>Key Features:</strong></p>
<ul>
<li>Handles both Ant-Design and Select2 dropdowns</li>
<li>Automatically detects UI framework</li>
<li>Captures ALL dropdown options</li>
<li>Identifies cascade relationships</li>
</ul>
<h3 id="2-scraper-validator">2. Scraper Validator<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#2-scraper-validator" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>Self-healing validation loop that tests and fixes generated scrapers.</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="python" data-theme="github-light github-dark"><code data-language="python" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ScraperValidator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    Validates generated scrapers and fixes issues.</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> validate_scraper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        self,</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        scraper_path: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        max_attempts: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ) -> </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Run scraper, check for errors, fix if needed.</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> attempt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, max_attempts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # Run scraper</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._run_scraper(scraper_path)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result.success:</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                # Store successful pattern</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._store_pattern(scraper_path)</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;attempt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: attempt}</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # AI analyzes error</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            fix </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._generate_fix(result.error, result.screenshot)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # Apply fix</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._apply_fix(scraper_path, fix)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;failed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;attempts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: max_attempts}</span></span></code></pre></figure>
<h3 id="3-pattern-library">3. Pattern Library<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#3-pattern-library" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>Stores successful patterns for reuse across similar portals.</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="python" data-theme="github-light github-dark"><code data-language="python" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PatternLibrary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    Store and retrieve successful scraper patterns.</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> store_pattern</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        self,</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        portal_url: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        form_schema: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        generated_code: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        confidence: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">float</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ):</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Store a successful pattern.</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Args:</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            portal_url: Source portal URL</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            form_schema: Discovered form structure</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            generated_code: Working scraper code</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            confidence: Success rate (0.0-1.0)</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # Extract code snippets (dropdown handlers, cascade logic)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        snippets </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._extract_code_snippets(generated_code)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # Store in SQLite + vector DB (optional)</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.db.insert({</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            'url'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: portal_url,</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            'framework'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: form_schema[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">'ui_framework'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            'field_types'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: form_schema[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">'field_types'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            'code'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: generated_code,</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            'snippets'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: snippets,</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            'confidence'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: confidence,</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            'created_at'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: datetime.now()</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        })</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_similar_patterns</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, form_schema: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -> </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Find patterns similar to given form schema.</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Returns: List of similar patterns, sorted by similarity score.</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # Match by:</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 1. UI framework (exact match)</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 2. Field types (overlap)</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 3. Cascade patterns (structural similarity)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        patterns </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.db.query(</span></span>
<span data-line><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            framework</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">form_schema[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">'ui_framework'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ).order_by(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">'confidence DESC'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).limit(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> patterns</span></span></code></pre></figure>
<h3 id="4-code-templates">4. Code Templates<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#4-code-templates" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>Proven, tested code snippets for common patterns.</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="python" data-theme="github-light github-dark"><code data-language="python" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Ant-Design dropdown handler (tested on MCD Delhi)</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ANT_DESIGN_SEARCHABLE_SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;&quot;</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">async def _fill_searchable_select(self, selector, value, field_name):</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    \&quot;\&quot;\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Fill Ant-Design searchable select dropdown.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\&quot;\&quot;\&quot;</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    element = self.page.locator(selector)</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    wrapper = element.locator(&quot;xpath=ancestor::div[contains(@class,'ant-select')]&quot;).first</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    # Click to open dropdown</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    await wrapper.click(force=True)</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    await asyncio.sleep(0.8)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    # Type to search</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    search_input = self.page.locator(&quot;.ant-select-selection-search-input&quot;).first</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    await search_input.fill(value)</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    await asyncio.sleep(0.5)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    # Click matching option</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    option = self.page.locator(f&quot;.ant-select-item-option >> text=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{value}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;).first</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    await option.click()</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    await asyncio.sleep(0.5)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    self.logger.info(f&quot;Selected '</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{value}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">' in </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{field_name}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;)</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\&quot;\&quot;\&quot;</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"># Select2 dropdown handler (tested on Smart Ranchi)</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SELECT2_DROPDOWN = &quot;&quot;&quot;</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _fill_select2_dropdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, selector, value, field_name):</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    \</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">&quot;\&quot;\&quot;Fill jQuery Select2 dropdown.\&quot;\&quot;\&quot;</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Open dropdown</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.page.click(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">selector</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> + .select2-container&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asyncio.sleep(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Search for value</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    search </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.page.locator(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.select2-search__field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).first</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> search.fill(value)</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asyncio.sleep(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Select option</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    option </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.page.locator(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.select2-results__option >> text=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).first</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> option.click()</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asyncio.sleep(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.logger.info(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Selected '</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">' in </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">field_name</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">&quot;\&quot;\&quot;</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Cascade handler template</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CASCADE_HANDLER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;&quot;</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">async def _handle_cascade(self, parent_selector, child_selector, parent_value, child_value):</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    \&quot;\&quot;\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Handle cascading dropdown (parent triggers child options).</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\&quot;\&quot;\&quot;</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    # Fill parent</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    await self._fill_dropdown(parent_selector, parent_value)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    # Wait for child to load</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    await asyncio.sleep(1.0)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    # Verify child has options</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    child_options = await self._get_dropdown_options(child_selector)</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    if not child_options or child_value not in child_options:</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        raise ValueError(f&quot;Child value '</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{child_value}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">' not available after selecting parent&quot;)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    # Fill child</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    await self._fill_dropdown(child_selector, child_value)</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\&quot;\&quot;\&quot;</span></span></code></pre></figure>
<hr/>
<h2 id="the-discovery-process">The Discovery Process<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#the-discovery-process" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="what-happens-during-discovery">What Happens During Discovery<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#what-happens-during-discovery" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="github-light github-dark"><code data-language="bash" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grivredr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> discover</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://smartranchi.in/Portal/View/ComplaintRegistration.aspx&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --portal</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ranchi_smart</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jharkhand</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --district</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ranchi</span></span></code></pre></figure>
<h3 id="detailed-breakdown">Detailed Breakdown<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#detailed-breakdown" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<h4 id="step-1-page-load">Step 1: Page Load<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#step-1-page-load" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<pre><code>[1] Loading page...
    - Open headless Chromium browser
    - Navigate to URL
    - Wait for network idle (all requests complete)
    - Wait 2 seconds for JS to initialize
</code></pre>
<h4 id="step-2-ai-analysis">Step 2: AI Analysis<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#step-2-ai-analysis" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<pre><code>[2] AI analyzing form with Playwright tools...

    AI Call 1: get_all_form_fields()
    → Returns: All form fields with types, selectors, labels

    AI Call 2: get_dropdown_options(&quot;#problem_dropdown&quot;)
    → Returns: [&quot;Water Supply&quot;, &quot;Drainage&quot;, &quot;Road&quot;, ...]

    AI Call 3: get_dropdown_options(&quot;#ward_dropdown&quot;)
    → Returns: [&quot;Ward 1&quot;, &quot;Ward 2&quot;, ..., &quot;Ward 55&quot;]

    AI Call 4: select_dropdown_option(&quot;#zone&quot;, &quot;Central Zone&quot;)
    → Selects option to test cascading

    AI Call 5: get_dropdown_options(&quot;#ward_dropdown&quot;)
    → Returns: Ward options for Central Zone (cascade loaded)

    ... continues until all dropdowns explored ...

    AI Call N: complete_discovery(full_structure)
    → AI provides complete form structure with all options
</code></pre>
<h4 id="step-3-context-saved">Step 3: Context Saved<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#step-3-context-saved" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<pre><code>[3] Saving context...

    portals/jharkhand/ranchi/ranchi_smart/
    ├── context/
    │   ├── dropdowns.json     # All dropdown options with values
    │   ├── cascades.json      # Cascade relationships
    │   └── field_mappings.json
    ├── structure.json         # Full form structure
    └── metadata.json          # Training cost, timestamp
</code></pre>
<h4 id="step-4-code-generation-with-pattern-learning">Step 4: Code Generation (with Pattern Learning)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#step-4-code-generation-with-pattern-learning" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<pre><code>[4] Generating scraper code...

    - AI receives form structure + dropdown context
    - Detects UI framework: Select2
    - Queries pattern library for similar forms
    - Finds: 3 successful Select2 patterns
    - Uses proven Select2 template (95% confidence)
    - Generates complete Python class
    - Saves to scrapers/ranchi_smart/ranchi_smart_scraper.py
</code></pre>
<hr/>
<h2 id="the-validation--self-healing-loop">The Validation &amp; Self-Healing Loop<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#the-validation--self-healing-loop" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="why-validation-matters">Why Validation Matters<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#why-validation-matters" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>Generated code might have issues:</p>
<ul>
<li>Selector slightly wrong</li>
<li>Need more wait time</li>
<li>Framework-specific quirk not handled</li>
<li>Cascade timing issue</li>
</ul>
<h3 id="the-self-healing-process">The Self-Healing Process<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#the-self-healing-process" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="github-light github-dark"><code data-language="bash" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grivredr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> validate</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --scraper</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scrapers/ranchi_smart/ranchi_smart_scraper.py</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jharkhand</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --district</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ranchi</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --portal</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ranchi_smart</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --max-attempts</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span></span></code></pre></figure>
<h3 id="validation-loop">Validation Loop<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#validation-loop" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>┌─────────────────────────────────────────────────────────┐
│                  VALIDATION LOOP                         │
└─────────────────────────────────────────────────────────┘

  ┌──────────┐     ┌──────────┐     ┌──────────┐
  │   RUN    │────▶│  ERROR?  │────▶│   FIX    │
  │ SCRAPER  │     │          │     │   CODE   │
  └──────────┘     └──────────┘     └──────────┘
       ▲                │                │
       │                │ No             │
       │                ▼                │
       │           ┌──────────┐          │
       │           │ SUCCESS! │          │
       │           └────┬─────┘          │
       │                │                │
       │                ▼                │
       │           ┌──────────┐          │
       │           │  STORE   │          │
       │           │ PATTERN  │          │
       │           └──────────┘          │
       │                                 │
       └─────────────────────────────────┘
              (retry with fixed code)
</code></pre>
<hr/>
<h2 id="pattern-learning-system">Pattern Learning System<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#pattern-learning-system" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p>Grivredr automatically learns from successful scrapers to improve future generations.</p>
<h3 id="how-it-works">How It Works<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#how-it-works" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>┌─────────────────────────────────────────────────────────────────┐
│                    PATTERN LEARNING LOOP                         │
└─────────────────────────────────────────────────────────────────┘

     ┌──────────┐      ┌──────────┐      ┌──────────┐
     │ DISCOVER │ ──── │ VALIDATE │ ──── │  STORE   │
     │  PORTAL  │      │ SCRAPER  │      │ PATTERN  │
     └──────────┘      └──────────┘      └──────────┘
          ▲                                    │
          │                                    ▼
     ┌──────────┐                        ┌──────────┐
     │   USE    │ ◄───────────────────── │ PATTERN  │
     │ PATTERNS │                        │ LIBRARY  │
     └──────────┘                        └──────────┘
</code></pre>
<h3 id="what-gets-learned">What Gets Learned<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#what-gets-learned" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<ol>
<li><strong>Code Snippets</strong>: Working dropdown handlers, cascade patterns, validation triggers</li>
<li><strong>UI Framework Detection</strong>: Ant-Design, Select2, ASP.NET, Bootstrap patterns</li>
<li><strong>Timing Patterns</strong>: How long to wait for cascading dropdowns</li>
<li><strong>Success Rates</strong>: Which patterns work best for which form types</li>
</ol>
<h3 id="pattern-library-components">Pattern Library Components<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#pattern-library-components" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong><code>knowledge/pattern_library.py</code></strong>:</p>
<ul>
<li>SQLite storage for patterns</li>
<li>Optional vector search for semantic similarity</li>
<li>Code snippet extraction from working scrapers</li>
<li>Confidence scoring based on validation success</li>
</ul>
<p><strong><code>knowledge/code_templates.py</code></strong>:</p>
<ul>
<li>Proven, tested code for each UI framework</li>
<li>Ant-Design searchable select handler</li>
<li>Select2 jQuery dropdown handler</li>
<li>ASP.NET WebForms patterns</li>
<li>Cascade handling templates</li>
</ul>
<h3 id="usage-in-code-generation">Usage in Code Generation<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#usage-in-code-generation" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>When generating a new scraper:</p>
<ol>
<li><strong>Detect UI Framework</strong>: Is this Ant-Design? Select2? ASP.NET?</li>
<li><strong>Find Similar Patterns</strong>: Search library for forms with similar field types</li>
<li><strong>Inject Proven Templates</strong>: Use tested code instead of AI guessing</li>
<li><strong>Generate with Context</strong>: AI knows what patterns work</li>
</ol>
<p><strong>Example:</strong></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="python" data-theme="github-light github-dark"><code data-language="python" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Code generation with pattern learning</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> generate_scraper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(form_structure: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -> </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 1. Detect framework</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    framework </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> detect_framework(form_structure)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 2. Find similar patterns</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    similar </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pattern_library.get_similar_patterns(form_structure)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 3. Build prompt with proven patterns</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;&quot;</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    Generate scraper for </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">framework</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> form.</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    Similar portals that worked:</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    {</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">format_patterns(similar)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    Use these proven code snippets:</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    {</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">get_templates_for_framework(framework)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    Form structure:</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    {</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">json.dumps(form_structure)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 4. AI generates with pattern context</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gemini.generate(prompt)</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> code</span></span></code></pre></figure>
<h3 id="cli-commands-for-patterns">CLI Commands for Patterns<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#cli-commands-for-patterns" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="github-light github-dark"><code data-language="bash" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Show pattern library statistics</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grivredr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> patterns</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># View patterns found similar to a new form</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grivredr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> detect</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://portal.example.com&quot;</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Manually add a pattern (after validation)</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grivredr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> store-pattern</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --scraper</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scrapers/portal/scraper.py</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --confidence</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.95</span></span></code></pre></figure>
<h3 id="when-patterns-are-stored">When Patterns Are Stored<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#when-patterns-are-stored" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>Patterns are automatically stored when:</p>
<ul>
<li><strong>Validation passes</strong> (<code>scraper_validator.py</code>)</li>
<li><strong>Continuous improvement succeeds</strong> (<code>continuous_improvement_agent.py</code>)</li>
<li><strong>Discovery completes</strong> (<code>hybrid_form_discovery.py</code>)</li>
</ul>
<p>Confidence scores are calculated based on:</p>
<ul>
<li>Number of validation attempts (fewer = higher confidence)</li>
<li>Success rate during improvement</li>
<li>Cycles needed to reach target</li>
</ul>
<h3 id="pattern-storage-schema">Pattern Storage Schema<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#pattern-storage-schema" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="python" data-theme="github-light github-dark"><code data-language="python" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># SQLite table: patterns</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;portal_url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://smartranchi.in/...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;state&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;jharkhand&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;district&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ranchi&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;portal_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ranchi_smart&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Form characteristics</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;ui_framework&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;select2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;field_count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;field_types&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;searchable_select&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;textarea&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;file&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;has_cascades&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: true,</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;cascade_count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Code snippets</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;full_code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Complete scraper</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;dropdown_handler&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Extracted snippet</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;cascade_handler&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Extracted snippet</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Success metrics</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;confidence&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.95</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;validation_attempts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;success_rate&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;created_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: timestamp,</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;last_used_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: timestamp,</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;usage_count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></figure>
<h3 id="benefits-of-pattern-learning">Benefits of Pattern Learning<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#benefits-of-pattern-learning" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<ol>
<li><strong>Faster Generation</strong>: Reuse proven code, less guesswork</li>
<li><strong>Higher Success Rate</strong>: Patterns have proven to work</li>
<li><strong>Reduced Costs</strong>: Fewer AI calls for similar forms</li>
<li><strong>Better Reliability</strong>: Tested patterns are more robust</li>
<li><strong>Continuous Improvement</strong>: System gets smarter over time</li>
</ol>
<hr/>
<h2 id="directory-structure">Directory Structure<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#directory-structure" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="portal-data-organization">Portal Data Organization<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#portal-data-organization" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>portals/
└── {state}/                    # e.g., jharkhand, delhi
    └── {district}/             # e.g., ranchi, central_zone
        └── {portal_name}/      # e.g., ranchi_smart, mcd_delhi
            │
            ├── scraper.py      # Generated scraper code
            │
            ├── structure.json  # Discovered form structure
            │   {
            │     &quot;form_url&quot;: &quot;https://...&quot;,
            │     &quot;form_title&quot;: &quot;Complaint Registration&quot;,
            │     &quot;ui_framework&quot;: &quot;select2&quot;,
            │     &quot;fields&quot;: [
            │       {
            │         &quot;name&quot;: &quot;Problem&quot;,
            │         &quot;type&quot;: &quot;searchable_select&quot;,
            │         &quot;selector&quot;: &quot;#problem_id&quot;,
            │         &quot;required&quot;: true,
            │         &quot;options&quot;: [&quot;Water Supply&quot;, &quot;Drainage&quot;, ...]
            │       },
            │       ...
            │     ]
            │   }
            │
            ├── context/        # Dropdown context (critical!)
            │   │
            │   ├── dropdowns.json
            │   │   {
            │   │     &quot;Problem&quot;: {
            │   │       &quot;selector&quot;: &quot;#problem_id&quot;,
            │   │       &quot;options&quot;: {
            │   │         &quot;Water Supply&quot;: &quot;1&quot;,
            │   │         &quot;Drainage&quot;: &quot;2&quot;
            │   │       }
            │   │     }
            │   │   }
            │   │
            │   ├── cascades.json
            │   │   {
            │   │     &quot;Zone_to_Ward&quot;: {
            │   │       &quot;parent&quot;: &quot;#zone_id&quot;,
            │   │       &quot;child&quot;: &quot;#ward_id&quot;
            │   │     }
            │   │   }
            │   │
            │   └── field_mappings.json
            │
            └── metadata.json   # Training info
                {
                  &quot;created_at&quot;: &quot;2024-12-27T22:33:00&quot;,
                  &quot;training_cost&quot;: 0.29,
                  &quot;api_calls&quot;: 10,
                  &quot;ui_framework&quot;: &quot;select2&quot;,
                  &quot;pattern_confidence&quot;: 0.95,
                  &quot;patterns_used&quot;: [&quot;pattern_uuid_1&quot;, &quot;pattern_uuid_2&quot;]
                }
</code></pre>
<hr/>
<h2 id="cli-commands">CLI Commands<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#cli-commands" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="main-commands">Main Commands<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#main-commands" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="github-light github-dark"><code data-language="bash" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. DISCOVER - Generate scraper for a new portal</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grivredr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> discover</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://portal.example.com/form&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --portal</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> portal_name</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state_name</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --district</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> district_name</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [--visible]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Show browser window</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. TEST - Dry-run test (fill form, don't submit)</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grivredr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --scraper</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scrapers/portal_name/scraper.py</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state_name</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --district</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> district_name</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --portal</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> portal_name</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [--visible]</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. VALIDATE - Self-healing validation loop</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grivredr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> validate</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --scraper</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scrapers/portal_name/scraper.py</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --max-attempts</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [--submit]   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Actually submit form (not dry-run)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. IMPROVE - Continuous improvement</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grivredr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> improve</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --scraper</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scrapers/portal_name/scraper.py</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --target</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 90</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # 90% success rate target</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    --max-cycles</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 5. LIST - Show all portals</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grivredr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [--state </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">state_name]</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 6. DETECT - Detect UI framework</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grivredr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> detect</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://portal.example.com&quot;</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 7. PATTERNS - View pattern library</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grivredr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> patterns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [--framework </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">select2]</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Filter by framework</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [--top 10]             </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Top N by confidence</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 8. STORE-PATTERN - Manually store pattern</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grivredr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> store-pattern</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --scraper</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scrapers/portal/scraper.py</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --confidence</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.95</span></span></code></pre></figure>
<hr/>
<h2 id="cost-tracking">Cost Tracking<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#cost-tracking" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="typical-costs">Typical Costs<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#typical-costs" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>









































<div class="table-container"><table><thead><tr><th>Operation</th><th>AI Calls</th><th>Typical Cost</th><th>With Pattern Learning</th></tr></thead><tbody><tr><td>Discovery (simple form)</td><td>8-12</td><td>$0.15-0.25</td><td>$0.10-0.20 (20% ↓)</td></tr><tr><td>Discovery (complex form)</td><td>15-25</td><td>$0.30-0.70</td><td>$0.20-0.50 (30% ↓)</td></tr><tr><td>Code generation</td><td>1</td><td>$0.05-0.10</td><td>$0.03-0.07 (40% ↓)</td></tr><tr><td>Validation (per attempt)</td><td>1-2</td><td>$0.01-0.05</td><td>$0.01-0.03 (20% ↓)</td></tr><tr><td>Self-healing fix</td><td>1</td><td>$0.05-0.15</td><td>$0.03-0.10 (30% ↓)</td></tr></tbody></table></div>
<p><strong>Cost Reduction from Pattern Learning:</strong></p>
<ul>
<li><strong>First portal</strong> (no patterns): $0.50</li>
<li><strong>10th similar portal</strong> (with patterns): $0.30 (40% reduction)</li>
<li><strong>100th portal</strong>: $0.20 (60% reduction)</li>
</ul>
<hr/>
<h2 id="integration-with-darshi">Integration with Darshi<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#integration-with-darshi" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="use-cases">Use Cases<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#use-cases" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<h4 id="1-unified-grievance-filing">1. Unified Grievance Filing<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#1-unified-grievance-filing" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p><strong>Scenario:</strong> User reports pothole via Darshi</p>
<pre><code>User fills Darshi form:
├─ Issue: Pothole
├─ Location: Koramangala, Bangalore
├─ Photo: [image]
└─ Description: &quot;Large pothole near mall&quot;

Darshi Backend:
1. Store in Darshi database (as usual)
2. Identify responsible portal: BBMP grievance portal
3. Check if Grivredr scraper exists
   → Yes: bbmp_bangalore scraper (95% confidence pattern)

4. Call Grivredr scraper:
   await bbmp_scraper.fill_and_submit({
     &quot;category&quot;: &quot;Road Maintenance&quot;,
     &quot;ward&quot;: &quot;98&quot;,
     &quot;issue&quot;: &quot;Pothole&quot;,
     &quot;description&quot;: &quot;...&quot;,
     &quot;location&quot;: &quot;...&quot;,
     &quot;photo&quot;: image_file
   })

5. Capture tracking ID from portal
   → Store in Darshi: external_tracking_id = &quot;BBMP/2024/12345&quot;

6. Return to user:
   &quot;✅ Report filed successfully!
    Darshi ID: #DR123456
    BBMP ID: BBMP/2024/12345&quot;
</code></pre>
<h4 id="2-multi-portal-filing">2. Multi-Portal Filing<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#2-multi-portal-filing" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p><strong>Scenario:</strong> Issue requires filing to multiple agencies</p>
<pre><code>User reports: &quot;Construction site causing noise and dust pollution&quot;

Darshi identifies multiple agencies:
├─ Municipal Corp (illegal construction check)
├─ Pollution Control Board (noise/dust)
└─ Traffic Police (road congestion)

For each agency:
1. Check if Grivredr scraper available
2. File complaint automatically (using learned patterns)
3. Track all IDs
4. Show consolidated view to user
</code></pre>
<h4 id="3-status-tracking">3. Status Tracking<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#3-status-tracking" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p><strong>Scenario:</strong> User wants to check status of filed complaint</p>
<pre><code>Darshi stores:
├─ Internal report ID: DR123456
└─ External tracking ID: BBMP/2024/12345

User clicks &quot;Check Status&quot;:

Darshi calls Grivredr status checker:
await bbmp_scraper.check_status(&quot;BBMP/2024/12345&quot;)

Returns:
{
  &quot;status&quot;: &quot;In Progress&quot;,
  &quot;last_updated&quot;: &quot;2024-12-20&quot;,
  &quot;assigned_to&quot;: &quot;Ward Engineer, Ward 98&quot;,
  &quot;remarks&quot;: &quot;Site inspection scheduled for Dec 25&quot;
}

Darshi shows:
&quot;📊 Status Update
 Your report (BBMP/2024/12345) is in progress.
 Inspection scheduled for Dec 25.
 Assigned to: Ward Engineer, Ward 98&quot;
</code></pre>
<h3 id="integration-architecture">Integration Architecture<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#integration-architecture" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>┌─────────────────────────────────────────────────────────────┐
│                      DARSHI CORE                             │
├─────────────────────────────────────────────────────────────┤
│  User submits report → Darshi processes → Stores in DB      │
└──────────────────────────┬──────────────────────────────────┘
                           │
                           ▼
                  ┌────────────────┐
                  │  Portal Router │  (Which portal to file to?)
                  └────────┬───────┘
                           │
                           ▼
┌─────────────────────────────────────────────────────────────┐
│                      GRIVREDR SERVICE                        │
├─────────────────────────────────────────────────────────────┤
│  API Endpoints:                                              │
│  • POST /grivredr/file                                       │
│    - Parameters: portal_id, complaint_data                   │
│    - Returns: tracking_id, success                           │
│                                                              │
│  • GET /grivredr/status/{portal_id}/{tracking_id}            │
│    - Returns: status, updates, remarks                       │
│                                                              │
│  • GET /grivredr/portals                                     │
│    - Returns: list of available portal scrapers              │
│                                                              │
│  • GET /grivredr/patterns                                    │
│    - Returns: pattern library statistics                     │
└──────────────────────────────┬──────────────────────────────┘
                               │
                               ▼
                  ┌────────────────────┐
                  │  Scraper Registry  │
                  │  + Pattern Library │
                  └────────┬───────────┘
                           │
              ┌────────────┼────────────┐
              ▼            ▼            ▼
         ┌────────┐   ┌────────┐   ┌────────┐
         │  BBMP  │   │  PMC   │   │ Ranchi │
         │ Scraper│   │ Scraper│   │ Scraper│
         │ (95%)  │   │ (92%)  │   │ (98%)  │
         └────────┘   └────────┘   └────────┘
         % = pattern confidence
</code></pre>
<hr/>
<h2 id="migration-path">Migration Path<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#migration-path" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="phase-1-standalone-development-6-8-weeks">Phase 1: Standalone Development (6-8 weeks)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#phase-1-standalone-development-6-8-weeks" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Goals:</strong> Build Grivredr as independent tool</p>
<p><strong>Tasks:</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" checked disabled/> Core discovery agent</li>
<li class="task-list-item"><input type="checkbox" checked disabled/> Scraper generation</li>
<li class="task-list-item"><input type="checkbox" checked disabled/> Validation &amp; self-healing</li>
<li class="task-list-item"><input type="checkbox" checked disabled/> Pattern library foundation</li>
<li class="task-list-item"><input type="checkbox" disabled/> CLI interface polishing</li>
<li class="task-list-item"><input type="checkbox" disabled/> Documentation</li>
<li class="task-list-item"><input type="checkbox" disabled/> Test on 20+ portals</li>
</ul>
<p><strong>Deliverables:</strong></p>
<ul>
<li>Working Grivredr tool (CLI)</li>
<li>20+ portal scrapers generated</li>
<li>Pattern library with initial patterns</li>
</ul>
<h3 id="phase-2-pattern-learning-enhancement-3-4-weeks">Phase 2: Pattern Learning Enhancement (3-4 weeks)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#phase-2-pattern-learning-enhancement-3-4-weeks" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Goals:</strong> Enhance pattern learning capabilities</p>
<p><strong>Tasks:</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled/> Vector search for semantic similarity</li>
<li class="task-list-item"><input type="checkbox" disabled/> Automatic snippet extraction</li>
<li class="task-list-item"><input type="checkbox" disabled/> Confidence scoring improvements</li>
<li class="task-list-item"><input type="checkbox" disabled/> Pattern effectiveness tracking</li>
<li class="task-list-item"><input type="checkbox" disabled/> Pattern visualization dashboard</li>
</ul>
<p><strong>Deliverables:</strong></p>
<ul>
<li>Advanced pattern matching</li>
<li>Pattern library dashboard</li>
</ul>
<h3 id="phase-3-api-service-4-5-weeks">Phase 3: API Service (4-5 weeks)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#phase-3-api-service-4-5-weeks" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Goals:</strong> Convert to API service</p>
<p><strong>Tasks:</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled/> Build FastAPI service wrapper</li>
<li class="task-list-item"><input type="checkbox" disabled/> Scraper registry system</li>
<li class="task-list-item"><input type="checkbox" disabled/> File complaint API endpoint</li>
<li class="task-list-item"><input type="checkbox" disabled/> Check status API endpoint</li>
<li class="task-list-item"><input type="checkbox" disabled/> Portal list API endpoint</li>
<li class="task-list-item"><input type="checkbox" disabled/> Pattern library API endpoint</li>
<li class="task-list-item"><input type="checkbox" disabled/> Authentication &amp; rate limiting</li>
</ul>
<p><strong>Deliverables:</strong></p>
<ul>
<li>Grivredr API service</li>
<li>API documentation</li>
</ul>
<h3 id="phase-4-darshi-integration-3-4-weeks">Phase 4: Darshi Integration (3-4 weeks)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#phase-4-darshi-integration-3-4-weeks" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Goals:</strong> Integrate with Darshi</p>
<p><strong>Tasks:</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled/> Portal identification logic (which portal for which location?)</li>
<li class="task-list-item"><input type="checkbox" disabled/> Complaint data mapping (Darshi → portal format)</li>
<li class="task-list-item"><input type="checkbox" disabled/> External tracking ID storage</li>
<li class="task-list-item"><input type="checkbox" disabled/> Status checking integration</li>
<li class="task-list-item"><input type="checkbox" disabled/> UI changes (show portal filing status)</li>
</ul>
<p><strong>Deliverables:</strong></p>
<ul>
<li>Seamless Darshi → Grivredr → Portal flow</li>
<li>Pattern-based portal suggestions</li>
</ul>
<h3 id="phase-5-scale-ongoing">Phase 5: Scale (Ongoing)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#phase-5-scale-ongoing" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Goals:</strong> 100+ portals, continuous learning</p>
<p><strong>Tasks:</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled/> Generate scrapers for top 50 cities</li>
<li class="task-list-item"><input type="checkbox" disabled/> Monitor scraper health (detect breakage)</li>
<li class="task-list-item"><input type="checkbox" disabled/> Auto-healing when portals change</li>
<li class="task-list-item"><input type="checkbox" disabled/> Portal coverage dashboard</li>
<li class="task-list-item"><input type="checkbox" disabled/> Pattern effectiveness analytics</li>
<li class="task-list-item"><input type="checkbox" disabled/> Continuous pattern refinement</li>
</ul>
<hr/>
<h2 id="challenges--mitigations">Challenges &amp; Mitigations<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#challenges--mitigations" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="1-portal-changes">1. Portal Changes<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#1-portal-changes" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Challenge:</strong> Portals change without notice, scrapers break.</p>
<p><strong>Mitigations:</strong></p>
<ul>
<li>Health monitoring (daily tests)</li>
<li>Auto-detection of breakage</li>
<li>Self-healing: Re-run discovery when scraper fails</li>
<li>Pattern library: Quickly regenerate with proven patterns</li>
<li>Graceful degradation: Fall back to manual filing instructions</li>
</ul>
<h3 id="2-captcha">2. CAPTCHA<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#2-captcha" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Challenge:</strong> Many portals have CAPTCHA.</p>
<p><strong>Mitigations:</strong></p>
<ul>
<li>Human-in-the-loop for CAPTCHA solving</li>
<li>CAPTCHA solving services (2Captcha, Anti-Captcha)</li>
<li>Alternative: Generate direct link for user to complete</li>
</ul>
<h3 id="3-authentication">3. Authentication<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#3-authentication" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Challenge:</strong> Some portals require login.</p>
<p><strong>Mitigations:</strong></p>
<ul>
<li>Support for credential storage (encrypted)</li>
<li>OAuth integration where available</li>
<li>User provides credentials once, stored securely</li>
</ul>
<h3 id="4-complex-multi-step-forms">4. Complex Multi-Step Forms<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#4-complex-multi-step-forms" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Challenge:</strong> Forms with multiple pages.</p>
<p><strong>Mitigations:</strong></p>
<ul>
<li>Discovery agent handles multi-step</li>
<li>Store intermediate state</li>
<li>Validation at each step</li>
<li>Pattern library includes multi-step patterns</li>
</ul>
<h3 id="5-file-upload-validation">5. File Upload Validation<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#5-file-upload-validation" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Challenge:</strong> Strict file size/format requirements.</p>
<p><strong>Mitigations:</strong></p>
<ul>
<li>Parse requirements during discovery</li>
<li>Pre-validate files before submission</li>
<li>Auto-resize images if needed</li>
<li>Pattern library includes upload patterns</li>
</ul>
<h3 id="6-pattern-drift">6. Pattern Drift<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#6-pattern-drift" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Challenge:</strong> Patterns become outdated as portals evolve.</p>
<p><strong>Mitigations:</strong></p>
<ul>
<li>Track pattern age and usage</li>
<li>Monitor pattern success rates</li>
<li>Auto-deprecate low-performing patterns</li>
<li>Periodic pattern review and refresh</li>
</ul>
<hr/>
<h2 id="success-metrics">Success Metrics<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#success-metrics" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="coverage">Coverage<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#coverage" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<ul>
<li>Number of portals with working scrapers (target: 100+)</li>
<li>Geographic coverage (% of Indian cities)</li>
<li>Pattern library size (target: 500+ patterns)</li>
</ul>
<h3 id="reliability">Reliability<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#reliability" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<ul>
<li>Scraper success rate (target: >95%)</li>
<li>Average time to detect + fix breakage (target: &lt;24h)</li>
<li>Pattern match rate (% of new portals matched to patterns)</li>
</ul>
<h3 id="efficiency">Efficiency<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#efficiency" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<ul>
<li>Average discovery time (target: &lt;5 min)</li>
<li>Cost per portal (target: &lt;$0.50)</li>
<li>Cost reduction from patterns (target: >40%)</li>
</ul>
<h3 id="learning">Learning<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#learning" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<ul>
<li>Pattern reuse rate (% of scrapers using patterns)</li>
<li>Pattern confidence improvement over time</li>
<li>Pattern library growth rate</li>
</ul>
<h3 id="integration">Integration<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#integration" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<ul>
<li>% of Darshi reports auto-filed to portals (target: 50%+)</li>
<li>User satisfaction with auto-filing</li>
<li>Reduction in manual filing time</li>
</ul>
<hr/>
<h2 id="conclusion">Conclusion<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#conclusion" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p>Grivredr transforms portal integration from a manual, time-consuming process to an automated, self-healing, continuously learning system. By combining:</p>
<ol>
<li><strong>AI-powered discovery</strong> (understands any form)</li>
<li><strong>Automated code generation</strong> (proven patterns)</li>
<li><strong>Self-healing validation</strong> (fixes itself)</li>
<li><strong>Pattern learning</strong> (gets smarter over time)</li>
<li><strong>Continuous improvement</strong> (adapts to changes)</li>
</ol>
<p>We enable Darshi to integrate with 100+ government portals at scale, providing citizens with truly unified grievance filing across all jurisdictions. The pattern learning system ensures that each successful scraper makes future integrations faster, more reliable, and more cost-effective.</p>
<hr/>
<p><em>Document Version: 1.0</em>
<em>Last Updated: December 2024</em>
<em>Part of: Darshi Civic Suite</em></p></article><hr/><div class="page-footer"></div></div><div class="right sidebar"><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div class="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:false,&quot;enableRadial&quot;:false}"></div><button class="global-graph-icon" aria-label="Global Graph"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
                s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
                c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
                C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
                c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
                v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
                s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
                C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
                S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
                s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
                s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></button></div><div class="global-graph-outer"><div class="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.2,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:true,&quot;enableRadial&quot;:true}"></div></div></div><div class="toc desktop-only"><button type="button" class="toc-header" aria-controls="toc-9" aria-expanded="true"><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><ul id="list-1" class="toc-content overflow"><li class="depth-0"><a href="#grivredr---ai-powered-web-scraper-factory" data-for="grivredr---ai-powered-web-scraper-factory">Grivredr - AI-Powered Web Scraper Factory</a></li><li class="depth-1"><a href="#table-of-contents" data-for="table-of-contents">Table of Contents</a></li><li class="depth-1"><a href="#executive-summary" data-for="executive-summary">Executive Summary</a></li><li class="depth-1"><a href="#problem-statement" data-for="problem-statement">Problem Statement</a></li><li class="depth-2"><a href="#the-challenge" data-for="the-challenge">The Challenge</a></li><li class="depth-2"><a href="#traditional-approach-painful" data-for="traditional-approach-painful">Traditional Approach (Painful)</a></li><li class="depth-2"><a href="#grivredr-approach-automated" data-for="grivredr-approach-automated">Grivredr Approach (Automated)</a></li><li class="depth-1"><a href="#solution-overview" data-for="solution-overview">Solution Overview</a></li><li class="depth-2"><a href="#automated-scraper-generation-pipeline" data-for="automated-scraper-generation-pipeline">Automated Scraper Generation Pipeline</a></li><li class="depth-2"><a href="#step-by-step" data-for="step-by-step">Step-by-Step</a></li><li class="depth-1"><a href="#architecture-overview" data-for="architecture-overview">Architecture Overview</a></li><li class="depth-2"><a href="#system-components" data-for="system-components">System Components</a></li><li class="depth-1"><a href="#key-components" data-for="key-components">Key Components</a></li><li class="depth-2"><a href="#1-hybrid-form-discovery-agent" data-for="1-hybrid-form-discovery-agent">1. Hybrid Form Discovery Agent</a></li><li class="depth-2"><a href="#2-scraper-validator" data-for="2-scraper-validator">2. Scraper Validator</a></li><li class="depth-2"><a href="#3-pattern-library" data-for="3-pattern-library">3. Pattern Library</a></li><li class="depth-2"><a href="#4-code-templates" data-for="4-code-templates">4. Code Templates</a></li><li class="depth-1"><a href="#the-discovery-process" data-for="the-discovery-process">The Discovery Process</a></li><li class="depth-2"><a href="#what-happens-during-discovery" data-for="what-happens-during-discovery">What Happens During Discovery</a></li><li class="depth-2"><a href="#detailed-breakdown" data-for="detailed-breakdown">Detailed Breakdown</a></li><li class="depth-1"><a href="#the-validation--self-healing-loop" data-for="the-validation--self-healing-loop">The Validation &amp; Self-Healing Loop</a></li><li class="depth-2"><a href="#why-validation-matters" data-for="why-validation-matters">Why Validation Matters</a></li><li class="depth-2"><a href="#the-self-healing-process" data-for="the-self-healing-process">The Self-Healing Process</a></li><li class="depth-2"><a href="#validation-loop" data-for="validation-loop">Validation Loop</a></li><li class="depth-1"><a href="#pattern-learning-system" data-for="pattern-learning-system">Pattern Learning System</a></li><li class="depth-2"><a href="#how-it-works" data-for="how-it-works">How It Works</a></li><li class="depth-2"><a href="#what-gets-learned" data-for="what-gets-learned">What Gets Learned</a></li><li class="depth-2"><a href="#pattern-library-components" data-for="pattern-library-components">Pattern Library Components</a></li><li class="depth-2"><a href="#usage-in-code-generation" data-for="usage-in-code-generation">Usage in Code Generation</a></li><li class="depth-2"><a href="#cli-commands-for-patterns" data-for="cli-commands-for-patterns">CLI Commands for Patterns</a></li><li class="depth-2"><a href="#when-patterns-are-stored" data-for="when-patterns-are-stored">When Patterns Are Stored</a></li><li class="depth-2"><a href="#pattern-storage-schema" data-for="pattern-storage-schema">Pattern Storage Schema</a></li><li class="depth-2"><a href="#benefits-of-pattern-learning" data-for="benefits-of-pattern-learning">Benefits of Pattern Learning</a></li><li class="depth-1"><a href="#directory-structure" data-for="directory-structure">Directory Structure</a></li><li class="depth-2"><a href="#portal-data-organization" data-for="portal-data-organization">Portal Data Organization</a></li><li class="depth-1"><a href="#cli-commands" data-for="cli-commands">CLI Commands</a></li><li class="depth-2"><a href="#main-commands" data-for="main-commands">Main Commands</a></li><li class="depth-1"><a href="#cost-tracking" data-for="cost-tracking">Cost Tracking</a></li><li class="depth-2"><a href="#typical-costs" data-for="typical-costs">Typical Costs</a></li><li class="depth-1"><a href="#integration-with-darshi" data-for="integration-with-darshi">Integration with Darshi</a></li><li class="depth-2"><a href="#use-cases" data-for="use-cases">Use Cases</a></li><li class="depth-2"><a href="#integration-architecture" data-for="integration-architecture">Integration Architecture</a></li><li class="depth-1"><a href="#migration-path" data-for="migration-path">Migration Path</a></li><li class="depth-2"><a href="#phase-1-standalone-development-6-8-weeks" data-for="phase-1-standalone-development-6-8-weeks">Phase 1: Standalone Development (6-8 weeks)</a></li><li class="depth-2"><a href="#phase-2-pattern-learning-enhancement-3-4-weeks" data-for="phase-2-pattern-learning-enhancement-3-4-weeks">Phase 2: Pattern Learning Enhancement (3-4 weeks)</a></li><li class="depth-2"><a href="#phase-3-api-service-4-5-weeks" data-for="phase-3-api-service-4-5-weeks">Phase 3: API Service (4-5 weeks)</a></li><li class="depth-2"><a href="#phase-4-darshi-integration-3-4-weeks" data-for="phase-4-darshi-integration-3-4-weeks">Phase 4: Darshi Integration (3-4 weeks)</a></li><li class="depth-2"><a href="#phase-5-scale-ongoing" data-for="phase-5-scale-ongoing">Phase 5: Scale (Ongoing)</a></li><li class="depth-1"><a href="#challenges--mitigations" data-for="challenges--mitigations">Challenges &amp; Mitigations</a></li><li class="depth-2"><a href="#1-portal-changes" data-for="1-portal-changes">1. Portal Changes</a></li><li class="depth-2"><a href="#2-captcha" data-for="2-captcha">2. CAPTCHA</a></li><li class="depth-2"><a href="#3-authentication" data-for="3-authentication">3. Authentication</a></li><li class="depth-2"><a href="#4-complex-multi-step-forms" data-for="4-complex-multi-step-forms">4. Complex Multi-Step Forms</a></li><li class="depth-2"><a href="#5-file-upload-validation" data-for="5-file-upload-validation">5. File Upload Validation</a></li><li class="depth-2"><a href="#6-pattern-drift" data-for="6-pattern-drift">6. Pattern Drift</a></li><li class="depth-1"><a href="#success-metrics" data-for="success-metrics">Success Metrics</a></li><li class="depth-2"><a href="#coverage" data-for="coverage">Coverage</a></li><li class="depth-2"><a href="#reliability" data-for="reliability">Reliability</a></li><li class="depth-2"><a href="#efficiency" data-for="efficiency">Efficiency</a></li><li class="depth-2"><a href="#learning" data-for="learning">Learning</a></li><li class="depth-2"><a href="#integration" data-for="integration">Integration</a></li><li class="depth-1"><a href="#conclusion" data-for="conclusion">Conclusion</a></li><li class="overflow-end"></li></ul></div></div><footer class><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.5.2</a> © 2025</p><ul><li><a href="https://github.com/jackyzha0/quartz">GitHub</a></li><li><a href="https://discord.gg/cRFFHYye7t">Discord Community</a></li></ul></footer></div></div></body><script type="application/javascript" data-persist="true">function n(){let t=this.parentElement;t.classList.toggle("is-collapsed");let e=t.getElementsByClassName("callout-content")[0];if(!e)return;let l=t.classList.contains("is-collapsed");e.style.gridTemplateRows=l?"0fr":"1fr"}function c(){let t=document.getElementsByClassName("callout is-collapsible");for(let e of t){let l=e.getElementsByClassName("callout-title")[0],s=e.getElementsByClassName("callout-content")[0];if(!l||!s)continue;l.addEventListener("click",n),window.addCleanup(()=>l.removeEventListener("click",n));let o=e.classList.contains("is-collapsed");s.style.gridTemplateRows=o?"0fr":"1fr"}}document.addEventListener("nav",c);
</script><script type="module" data-persist="true">function E(a,e){if(!a)return;function t(o){o.target===this&&(o.preventDefault(),o.stopPropagation(),e())}function n(o){o.key.startsWith("Esc")&&(o.preventDefault(),e())}a?.addEventListener("click",t),window.addCleanup(()=>a?.removeEventListener("click",t)),document.addEventListener("keydown",n),window.addCleanup(()=>document.removeEventListener("keydown",n))}function f(a){for(;a.firstChild;)a.removeChild(a.firstChild)}var m=class{constructor(e,t){this.container=e;this.content=t;this.setupEventListeners(),this.setupNavigationControls(),this.resetTransform()}isDragging=!1;startPan={x:0,y:0};currentPan={x:0,y:0};scale=1;MIN_SCALE=.5;MAX_SCALE=3;cleanups=[];setupEventListeners(){let e=this.onMouseDown.bind(this),t=this.onMouseMove.bind(this),n=this.onMouseUp.bind(this),o=this.onTouchStart.bind(this),r=this.onTouchMove.bind(this),i=this.onTouchEnd.bind(this),s=this.resetTransform.bind(this);this.container.addEventListener("mousedown",e),document.addEventListener("mousemove",t),document.addEventListener("mouseup",n),this.container.addEventListener("touchstart",o,{passive:!1}),document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("touchend",i),window.addEventListener("resize",s),this.cleanups.push(()=>this.container.removeEventListener("mousedown",e),()=>document.removeEventListener("mousemove",t),()=>document.removeEventListener("mouseup",n),()=>this.container.removeEventListener("touchstart",o),()=>document.removeEventListener("touchmove",r),()=>document.removeEventListener("touchend",i),()=>window.removeEventListener("resize",s))}cleanup(){for(let e of this.cleanups)e()}setupNavigationControls(){let e=document.createElement("div");e.className="mermaid-controls";let t=this.createButton("+",()=>this.zoom(.1)),n=this.createButton("-",()=>this.zoom(-.1)),o=this.createButton("Reset",()=>this.resetTransform());e.appendChild(n),e.appendChild(o),e.appendChild(t),this.container.appendChild(e)}createButton(e,t){let n=document.createElement("button");return n.textContent=e,n.className="mermaid-control-button",n.addEventListener("click",t),window.addCleanup(()=>n.removeEventListener("click",t)),n}onMouseDown(e){e.button===0&&(this.isDragging=!0,this.startPan={x:e.clientX-this.currentPan.x,y:e.clientY-this.currentPan.y},this.container.style.cursor="grabbing")}onMouseMove(e){this.isDragging&&(e.preventDefault(),this.currentPan={x:e.clientX-this.startPan.x,y:e.clientY-this.startPan.y},this.updateTransform())}onMouseUp(){this.isDragging=!1,this.container.style.cursor="grab"}onTouchStart(e){if(e.touches.length!==1)return;this.isDragging=!0;let t=e.touches[0];this.startPan={x:t.clientX-this.currentPan.x,y:t.clientY-this.currentPan.y}}onTouchMove(e){if(!this.isDragging||e.touches.length!==1)return;e.preventDefault();let t=e.touches[0];this.currentPan={x:t.clientX-this.startPan.x,y:t.clientY-this.startPan.y},this.updateTransform()}onTouchEnd(){this.isDragging=!1}zoom(e){let t=Math.min(Math.max(this.scale+e,this.MIN_SCALE),this.MAX_SCALE),n=this.content.getBoundingClientRect(),o=n.width/2,r=n.height/2,i=t-this.scale;this.currentPan.x-=o*i,this.currentPan.y-=r*i,this.scale=t,this.updateTransform()}updateTransform(){this.content.style.transform=`translate(${this.currentPan.x}px, ${this.currentPan.y}px) scale(${this.scale})`}resetTransform(){let t=this.content.querySelector("svg").getBoundingClientRect(),n=t.width/this.scale,o=t.height/this.scale;this.scale=1,this.currentPan={x:(this.container.clientWidth-n)/2,y:(this.container.clientHeight-o)/2},this.updateTransform()}},T=["--secondary","--tertiary","--gray","--light","--lightgray","--highlight","--dark","--darkgray","--codeFont"],y;document.addEventListener("nav",async()=>{let e=document.querySelector(".center").querySelectorAll("code.mermaid");if(e.length===0)return;y||=await import("https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.4.0/mermaid.esm.min.mjs");let t=y.default,n=new WeakMap;for(let r of e)n.set(r,r.innerText);async function o(){for(let s of e){s.removeAttribute("data-processed");let c=n.get(s);c&&(s.innerHTML=c)}let r=T.reduce((s,c)=>(s[c]=window.getComputedStyle(document.documentElement).getPropertyValue(c),s),{}),i=document.documentElement.getAttribute("saved-theme")==="dark";t.initialize({startOnLoad:!1,securityLevel:"loose",theme:i?"dark":"base",themeVariables:{fontFamily:r["--codeFont"],primaryColor:r["--light"],primaryTextColor:r["--darkgray"],primaryBorderColor:r["--tertiary"],lineColor:r["--darkgray"],secondaryColor:r["--secondary"],tertiaryColor:r["--tertiary"],clusterBkg:r["--light"],edgeLabelBackground:r["--highlight"]}}),await t.run({nodes:e})}await o(),document.addEventListener("themechange",o),window.addCleanup(()=>document.removeEventListener("themechange",o));for(let r=0;r<e.length;r++){let v=function(){let g=l.querySelector("#mermaid-space"),h=l.querySelector(".mermaid-content");if(!h)return;f(h);let w=i.querySelector("svg").cloneNode(!0);h.appendChild(w),l.classList.add("active"),g.style.cursor="grab",u=new m(g,h)},M=function(){l.classList.remove("active"),u?.cleanup(),u=null},i=e[r],s=i.parentElement,c=s.querySelector(".clipboard-button"),d=s.querySelector(".expand-button"),p=window.getComputedStyle(c),L=c.offsetWidth+parseFloat(p.marginLeft||"0")+parseFloat(p.marginRight||"0");d.style.right=`calc(${L}px + 0.3rem)`,s.prepend(d);let l=s.querySelector("#mermaid-container");if(!l)return;let u=null;d.addEventListener("click",v),E(l,M),window.addCleanup(()=>{u?.cleanup(),d.removeEventListener("click",v)})}});
</script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/copy-tex.min.js" type="application/javascript" data-persist="true"></script><script src="../../postscript.js" type="module" data-persist="true"></script></html>